query POEMS ($page: Int, $q: String, $tagId: ID) {
  poems (page: $page, q: $q, tagId: $tagId) {
    id
    uuid
    title
    paragraphs
    kind
    tags {
      id
      name
    }
    author {
      id
      uuid
      name
      dynasty
    }
  }
  poemsCount (q: $q, tagId: $tagId)
}

query POEMS_USER_STAR ($page: Int, $q: String, $tagId: ID) {
  poems (page: $page, q: $q, tagId: $tagId) {
    id 
    userIsStar
    userIsRecite
  }
}

query POEM_USER_STAR ($uuid: ID!) {
  poem (uuid: $uuid) {
    id
    userIsStar
    userIsRecite
  }
}

mutation RECITE_POEM($poemId: ID!, $recite: Boolean) {
  recitePoem (id: $poemId, recite: $recite) {
    id 
    userIsRecite
  }
}

mutation STAR_POEM($poemId: ID!, $star: Boolean) {
  starPoem (id: $poemId, star: $star) {
    id 
    userIsStar
  }
}

query POEM ($uuid: ID!) {
  poem (uuid: $uuid) {
    id
    uuid
    title
    intro
    paragraphs
    appreciation
    translation
    kind
    annotations
    phrases {
      id 
      phrase
    }
    tags {
      id
      name
      poems (pageSize: 6) {
        id
        uuid
        title
        paragraphs
        author {
          id
          dynasty
          uuid
          name
        }
      }
    }
    author {
      id
      uuid
      name
      dynasty
      birthYear
      deathYear
      intro
      poems {
        id
        uuid
        title
        paragraphs
      }
    }
  }
  poems {
    id   
    uuid
    title
    paragraphs
  }
}

mutation REGISTER (
  $email: String!
  $name: String!
  $password: String!
  $token: String!
  $verifyCode: String!
) {
  createUser (email: $email, name: $name, password: $password, token: $token, verifyCode: $verifyCode) {
    id 
  }
}

mutation LOGIN ($email: String!, $password: String!) {
  createUserToken (email: $email, password: $password) 
}

mutation SEND_VERIFY_CODE ($email: String!) {
  token: sendEmailVerifyCode(email: $email)
}

query PHRASES ($page: Int, $pageSize: Int) {
  phrases (page: $page, pageSize: $pageSize) {
    id
    phrase
    authorName
    poem {
      uuid
      title
      author {
        uuid
        name
        dynasty
      }
    }
  }
  phrasesCount
}

query STAR_POEMS ($userId: ID!) {
  user (id: $userId) {
    id
    name
    starPoemsWithDate {
      poem {
        id
        uuid
        title
        kind
        paragraphs
        userIsRecite
        userIsStar
        author {
          id
          uuid
          name
          dynasty
        }
      }
      updateTime
    }
  }
}

query RECITE_POEMS ($userId: ID!) {
  user (id: $userId) {
    id
    name
    recitePoemsWithDate {
      poem {
        id
        uuid
        title
        kind
        paragraphs
        userIsRecite
        userIsStar
        author {
          id
          uuid
          name
          dynasty
        }
      }
      updateTime
    }
  }
}

query ME {
  me {
    id 
    name
  } 
}

query TAGS {
  tags {
    id   
    name
    kind
  }  
}

query AUTHORS ($page: Int, $q: String) {
  authors (page: $page, q: $q) {
    id
    uuid
    name
    intro
    dynasty
    birthYear
    deathYear
  }
  authorsCount (q: $q)
}

query AUTHOR ($uuid: ID!) {
  author (uuid: $uuid) {
    id
    uuid
    name
    intro
    birthYear
    deathYear
    dynasty
  }
}

query AUTHOR_POEMS ($uuid: ID!, $page: Int) {
  author (uuid: $uuid) {
    id
    poems (page: $page) {
      id 
      uuid
      title
      kind
      tags {
        id
        name
      }
      userIsRecite
      userIsStar
      paragraphs
    }
    poemsCount
  }
}
